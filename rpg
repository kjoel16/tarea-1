package com.mycompany.logwriter;

import java.io.File;
import java.io.FileWriter;
import java.time.LocalDate;
import java.time.LocalDateTime;

public class LogWriterLib {

    // Ruta base donde se guardarÃ¡n los logs
    private static final String BASE_PATH = "C:/logs";

    public static void log(String project, String controller, String message) {

        try {
            LocalDate today = LocalDate.now();
            int hour = LocalDateTime.now().getHour();

            // Estructura:
            // /logs/proyecto/controlador/fecha/
            String path = BASE_PATH + "/" + project + "/" + controller + "/" + today;

            File folder = new File(path);

            if (!folder.exists()) {
                folder.mkdirs();
            }

            // Archivo por hora
            String fileName = path + "/" + hour + ".txt";

            FileWriter writer = new FileWriter(fileName, true);

            writer.write(LocalDateTime.now() + " -> " + message + "\n");

            writer.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
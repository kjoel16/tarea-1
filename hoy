dcl-proc main;
  dcl-pi *n end-pi;

  dow not gameOver;
    tick = tick + 1;
    spawnTick = spawnTick + 1;

    Physics();
    MoveObstacles();

    if spawnTick >= spawnEvery;
      SpawnObstacle();
      spawnTick = 0;
    endif;

    ClearWorld();
    DrawGround();
    DrawObstacles();
    DrawDino();
    DrawUI();

    if gameOver;
      MSG = '¡Colisión! F3 para salir.';
    else;
      MSG = 'F1 salta, F3 sale.';
    endif;

    exfmt SCR;

    if *in03 = *on;
      leave;
    endif;

    if *in01 = *on and not gameOver;
      if dinoRow = GROUNDROW;
        jumping = *on;
        velY = jumpPower;
      endif;
    endif;

    if not gameOver;
      CheckCollision();
    endif;
  enddo;

  *inlr = *on;
end-proc;